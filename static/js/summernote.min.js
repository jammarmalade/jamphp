(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(window.jQuery)}}(function(g){if(!Array.prototype.reduce){Array.prototype.reduce=function(H){var F=Object(this),D=F.length>>>0,E=0,G;if(arguments.length===2){G=arguments[1]}else{while(E<D&&!(E in F)){E++}if(E>=D){throw new TypeError("Reduce of empty array with no initial value")}G=F[E++]}for(;E<D;E++){if(E in F){G=H(G,F[E],E,F)}}return G}}if("function"!==typeof Array.prototype.filter){Array.prototype.filter=function(I){var H=Object(this),D=H.length>>>0;var G=[];var E=arguments.length>=2?arguments[1]:void 0;for(var F=0;F<D;F++){if(F in H){var J=H[F];if(I.call(E,J,F,H)){G.push(J)}}}return G}}var f=typeof define==="function"&&define.amd;var p=function(F){var H=F==="Comic Sans MS"?"Courier New":"Comic Sans MS";var D=g("<div>").css({position:"absolute",left:"-9999px",top:"-9999px",fontSize:"200px"}).text("mmmmmmmmmwwwwwww").appendTo(document.body);var G=D.css("fontFamily",H).width();var E=D.css("fontFamily",F+","+H).width();D.remove();return G!==E};var b={isMac:navigator.appVersion.indexOf("Mac")>-1,isMSIE:navigator.userAgent.indexOf("MSIE")>-1||navigator.userAgent.indexOf("Trident")>-1,isFF:navigator.userAgent.indexOf("Firefox")>-1,jqueryVersion:parseFloat(g.fn.jquery),isSupportAmd:f,hasCodeMirror:f?require.specified("CodeMirror"):!!window.CodeMirror,isFontInstalled:p,isW3CRangeSupport:!!document.createRange};var j=(function(){var O=function(P){return function(Q){return P===Q}};var K=function(Q,P){return Q===P};var F=function(P){return function(R,Q){return R[P]===Q[P]}};var M=function(){return true};var H=function(){return false};var G=function(P){return function(){return !P.apply(P,arguments)}};var J=function(Q,P){return function(R){return Q(R)&&P(R)}};var N=function(P){return P};var E=0;var L=function(P){var Q=++E+"";return P?P+Q:Q};var D=function(P){var Q=g(document);return{top:P.top+Q.scrollTop(),left:P.left+Q.scrollLeft(),width:P.right-P.left,height:P.bottom-P.top}};var I=function(R){var P={};for(var Q in R){if(R.hasOwnProperty(Q)){P[R[Q]]=Q}}return P};return{eq:O,eq2:K,peq2:F,ok:M,fail:H,self:N,not:G,and:J,uniqueId:L,rect2bnd:D,invertObject:I}})();var z=(function(){var N=function(R){return R[0]};var Q=function(R){return R[R.length-1]};var K=function(R){return R.slice(0,R.length-1)};var L=function(R){return R.slice(1)};var J=function(V,T){for(var S=0,R=V.length;S<R;S++){var U=V[S];if(T(U)){return U}}};var P=function(U,T){for(var S=0,R=U.length;S<R;S++){if(!T(U[S])){return false}}return true};var E=function(S,R){return g.inArray(R,S)!==-1};var I=function(S,R){R=R||j.self;return S.reduce(function(U,T){return U+R(T)},0)};var O=function(U){var S=[],R=-1,T=U.length;while(++R<T){S[R]=U[R]}return S};var G=function(T,R){if(!T.length){return[]}var S=L(T);return S.reduce(function(W,V){var U=Q(W);if(R(Q(U),V)){U[U.length]=V}else{W[W.length]=[V]}return W},[[N(T)]])};var M=function(U){var T=[];for(var S=0,R=U.length;S<R;S++){if(U[S]){T.push(U[S])}}return T};var F=function(U){var T=[];for(var S=0,R=U.length;S<R;S++){if(!E(T,U[S])){T.push(U[S])}}return T};var H=function(T,S){var R=T.indexOf(S);if(R===-1){return null}return T[R+1]};var D=function(T,S){var R=T.indexOf(S);if(R===-1){return null}return T[R-1]};return{head:N,last:Q,initial:K,tail:L,prev:D,next:H,find:J,contains:E,all:P,sum:I,from:O,clusterBy:G,compact:M,unique:F}})();var o=String.fromCharCode(160);var u="\ufeff";var w=(function(){var H=function(aP){return aP&&g(aP).hasClass("note-editable")};var al=function(aP){return aP&&g(aP).hasClass("note-control-sizing")};var aN=function(aP){var aQ;if(aP.hasClass("note-air-editor")){var aR=z.last(aP.attr("id").split("-"));aQ=function(aS){return function(){return g(aS+aR)}};return{editor:function(){return aP},editable:function(){return aP},popover:aQ("#note-popover-"),handle:aQ("#note-handle-"),dialog:aQ("#note-dialog-")}}else{aQ=function(aS){return function(){return aP.find(aS)}};return{editor:function(){return aP},dropzone:aQ(".note-dropzone"),toolbar:aQ(".note-toolbar"),editable:aQ(".note-editable"),codable:aQ(".note-codable"),statusbar:aQ(".note-statusbar"),popover:aQ(".note-popover"),handle:aQ(".note-handle"),dialog:aQ(".note-dialog")}}};var aJ=function(aP){aP=aP.toUpperCase();return function(aQ){return aQ&&aQ.nodeName.toUpperCase()===aP}};var M=function(aP){return aP&&aP.nodeType===3};var aE=function(aP){return aP&&/^BR|^IMG|^HR/.test(aP.nodeName.toUpperCase())};var J=function(aP){if(H(aP)){return false}return aP&&/^DIV|^P|^LI|^H[1-7]/.test(aP.nodeName.toUpperCase())};var aH=aJ("LI");var aL=function(aP){return J(aP)&&!aH(aP)};var az=aJ("TABLE");var V=function(aP){return !D(aP)&&!E(aP)&&!J(aP)&&!az(aP)&&!aO(aP)};var E=function(aP){return aP&&/^UL|^OL/.test(aP.nodeName.toUpperCase())};var N=function(aP){return aP&&/^TD|^TH/.test(aP.nodeName.toUpperCase())};var aO=aJ("BLOCKQUOTE");var D=function(aP){return N(aP)||aO(aP)||H(aP)};var L=aJ("A");var aq=function(aP){return V(aP)&&!!ap(aP,J)};var ar=function(aP){return V(aP)&&!ap(aP,J)};var G=aJ("BODY");var ao=function(aQ,aP){return aQ.nextSibling===aP||aQ.previousSibling===aP};var U=function(aQ,aP){aP=aP||j.ok;var aR=[];if(aQ.previousSibling&&aP(aQ.previousSibling)){aR.push(aQ.previousSibling)}aR.push(aQ);if(aQ.nextSibling&&aP(aQ.nextSibling)){aR.push(aQ.nextSibling)}return aR};var aC=b.isMSIE?"&nbsp;":"<br>";var I=function(aP){if(M(aP)){return aP.nodeValue.length}return aP.childNodes.length};var X=function(aQ){var aP=I(aQ);if(aP===0){return true}else{if(!w.isText(aQ)&&aP===1&&aQ.innerHTML===aC){return true}}return false};var P=function(aP){if(!aE(aP)&&!I(aP)){aP.innerHTML=aC}};var ap=function(aQ,aP){while(aQ){if(aP(aQ)){return aQ}if(H(aQ)){break}aQ=aQ.parentNode}return null};var aA=function(aQ,aP){aQ=aQ.parentNode;while(aQ){if(I(aQ)!==1){break}if(aP(aQ)){return aQ}if(H(aQ)){break}aQ=aQ.parentNode}return null};var ai=function(aR,aP){aP=aP||j.fail;var aQ=[];ap(aR,function(aS){if(!H(aS)){aQ.push(aS)}return aP(aS)});return aQ};var F=function(aR,aP){var aQ=ai(aR);return z.last(aQ.filter(aP))};var Z=function(aR,aQ){var aP=ai(aR);for(var aS=aQ;aS;aS=aS.parentNode){if(g.inArray(aS,aP)>-1){return aS}}return null};var ax=function(aR,aQ){aQ=aQ||j.fail;var aP=[];while(aR){if(aQ(aR)){break}aP.push(aR);aR=aR.previousSibling}return aP};var T=function(aR,aQ){aQ=aQ||j.fail;var aP=[];while(aR){if(aQ(aR)){break}aP.push(aR);aR=aR.nextSibling}return aP};var K=function(aQ,aP){var aS=[];aP=aP||j.ok;(function aR(aV){if(aQ!==aV&&aP(aV)){aS.push(aV)}for(var aU=0,aT=aV.childNodes.length;aU<aT;aU++){aR(aV.childNodes[aU])}})(aQ);return aS};var aB=function(aR,aQ){var aP=aR.parentNode;var aS=g("<"+aQ+">")[0];aP.insertBefore(aS,aR);aS.appendChild(aR);return aS};var S=function(aS,aR){var aQ=aR.nextSibling,aP=aR.parentNode;if(aQ){aP.insertBefore(aS,aQ)}else{aP.appendChild(aS)}return aS};var aK=function(aP,aQ){g.each(aQ,function(aR,aS){aP.appendChild(aS)});return aP};var aa=function(aP){return aP.offset===0};var am=function(aP){return aP.offset===I(aP.node)};var au=function(aP){return aa(aP)||am(aP)};var aD=function(aQ,aP){while(aQ&&aQ!==aP){if(aw(aQ)!==0){return false}aQ=aQ.parentNode}return true};var ac=function(aQ,aP){while(aQ&&aQ!==aP){if(aw(aQ)!==I(aQ.parentNode)-1){return false}aQ=aQ.parentNode}return true};var aw=function(aP){var aQ=0;while((aP=aP.previousSibling)){aQ+=1}return aQ};var ab=function(aP){return !!(aP&&aP.childNodes&&aP.childNodes.length)};var Q=function(aP,aQ){var aR,aS;if(aP.offset===0){if(H(aP.node)){return null}aR=aP.node.parentNode;aS=aw(aP.node)}else{if(ab(aP.node)){aR=aP.node.childNodes[aP.offset-1];aS=I(aR)}else{aR=aP.node;aS=aQ?0:aP.offset-1}}return{node:aR,offset:aS}};var W=function(aP,aQ){var aR,aS;if(I(aP.node)===aP.offset){if(H(aP.node)){return null}aR=aP.node.parentNode;aS=aw(aP.node)+1}else{if(ab(aP.node)){aR=aP.node.childNodes[aP.offset];aS=0}else{aR=aP.node;aS=aQ?I(aP.node):aP.offset+1}}return{node:aR,offset:aS}};var af=function(aP,aQ){return aP.node===aQ.node&&aP.offset===aQ.offset};var ae=function(aP){if(M(aP.node)||!ab(aP.node)||X(aP.node)){return true}var aR=aP.node.childNodes[aP.offset-1];var aQ=aP.node.childNodes[aP.offset];if((!aR||aE(aR))&&(!aQ||aE(aQ))){return true}return false};var aF=function(aP,aQ){while(aP){if(aQ(aP)){return aP}aP=Q(aP)}return null};var an=function(aP,aQ){while(aP){if(aQ(aP)){return aP}aP=W(aP)}return null};var O=function(aU,aR,aS,aQ){var aP=aU;while(aP){aS(aP);if(af(aP,aR)){break}var aT=aQ&&aU.node!==aP.node&&aR.node!==aP.node;aP=W(aP,aT)}};var Y=function(aP,aR){var aQ=ai(aR,j.eq(aP));return g.map(aQ,aw).reverse()};var aG=function(aR,aS){var aT=aR;for(var aQ=0,aP=aS.length;aQ<aP;aQ++){if(aT.childNodes.length<=aS[aQ]){aT=aT.childNodes[aT.childNodes.length-1]}else{aT=aT.childNodes[aS[aQ]]}}return aT};var aM=function(aP,aR){if(M(aP.node)){if(aa(aP)){return aP.node}else{if(am(aP)){return aP.node.nextSibling}}return aP.node.splitText(aP.offset)}var aQ=aP.node.childNodes[aP.offset];var aS=S(aP.node.cloneNode(false),aP.node);aK(aS,T(aQ));if(!aR){P(aP.node);P(aS)}return aS};var av=function(aQ,aP,aS){var aR=ai(aP.node,j.eq(aQ));if(!aR.length){return null}else{if(aR.length===1){return aM(aP,aS)}}return aR.reduce(function(aU,aT){var aV=S(aT.cloneNode(false),aT);if(aU===aP.node){aU=aM(aP,aS)}aK(aV,T(aU));if(!aS){P(aT);P(aV)}return aV})};var ak=function(aP,aU){var aS=aU?J:D;var aT=ai(aP.node,aS);var aW=z.last(aT)||aP.node;var aV,aR;if(aS(aW)){aV=aT[aT.length-2];aR=aW}else{aV=aW;aR=aV.parentNode}var aQ=aV&&av(aV,aP,aU);return{rightNode:aQ,container:aR}};var R=function(aP){return document.createElement(aP)};var aI=function(aP){return document.createTextNode(aP)};var ah=function(aT,aU){if(!aT||!aT.parentNode){return}if(aT.removeNode){return aT.removeNode(aU)}var aS=aT.parentNode;if(!aU){var aQ=[];var aR,aP;for(aR=0,aP=aT.childNodes.length;aR<aP;aR++){aQ.push(aT.childNodes[aR])}for(aR=0,aP=aQ.length;aR<aP;aR++){aS.insertBefore(aQ[aR],aT)}}aS.removeChild(aT)};var at=function(aR,aP){while(aR){if(H(aR)||!aP(aR)){break}var aQ=aR.parentNode;ah(aR);aR=aQ}};var ag=function(aQ,aR){if(aQ.nodeName.toUpperCase()===aR.toUpperCase()){return aQ}var aP=R(aR);if(aQ.style.cssText){aP.style.cssText=aQ.style.cssText}aK(aP,z.from(aQ.childNodes));S(aP,aQ);ah(aQ);return aP};var ad=aJ("TEXTAREA");var aj=function(aQ,aR){var aP=ad(aQ[0])?aQ.val():aQ.html();if(aR){var aS=/<(\/?)(\b(?!!)[^>\s]*)(.*?)(\s*\/?>)/g;aP=aP.replace(aS,function(aU,aX,aT){aT=aT.toUpperCase();var aW=/^DIV|^TD|^TH|^P|^LI|^H[1-7]/.test(aT)&&!!aX;var aV=/^BLOCKQUOTE|^TABLE|^TBODY|^TR|^HR|^UL|^OL/.test(aT);return aU+((aW||aV)?"\n":"")});aP=g.trim(aP)}return aP};var ay=function(aR,aP){var aQ=aR.val();if(aP){return aQ.replace(/[\n\r]/g,"")}return aQ};return{NBSP_CHAR:o,ZERO_WIDTH_NBSP_CHAR:u,blank:aC,emptyPara:"<p>"+aC+"</p>",makePredByNodeName:aJ,isEditable:H,isControlSizing:al,buildLayoutInfo:aN,isText:M,isVoid:aE,isPara:J,isPurePara:aL,isInline:V,isBodyInline:ar,isBody:G,isParaInline:aq,isList:E,isTable:az,isCell:N,isBlockquote:aO,isBodyContainer:D,isAnchor:L,isDiv:aJ("DIV"),isLi:aH,isBR:aJ("BR"),isSpan:aJ("SPAN"),isB:aJ("B"),isU:aJ("U"),isS:aJ("S"),isI:aJ("I"),isImg:aJ("IMG"),isTextarea:ad,isEmpty:X,isEmptyAnchor:j.and(L,X),isClosestSibling:ao,withClosestSiblings:U,nodeLength:I,isLeftEdgePoint:aa,isRightEdgePoint:am,isEdgePoint:au,isLeftEdgeOf:aD,isRightEdgeOf:ac,prevPoint:Q,nextPoint:W,isSamePoint:af,isVisiblePoint:ae,prevPointUntil:aF,nextPointUntil:an,walkPoint:O,ancestor:ap,singleChildAncestor:aA,listAncestor:ai,lastAncestor:F,listNext:T,listPrev:ax,listDescendant:K,commonAncestor:Z,wrap:aB,insertAfter:S,appendChildNodes:aK,position:aw,hasChildren:ab,makeOffsetPath:Y,fromOffsetPath:aG,splitTree:av,splitPoint:ak,create:R,createText:aI,remove:ah,removeWhile:at,replace:ag,html:aj,value:ay}})();var n=(function(){var F=function(Q,G){var J=Q.parentElement(),L;var P=document.body.createTextRange(),N;var O=z.from(J.childNodes);for(L=0;L<O.length;L++){if(w.isText(O[L])){continue}P.moveToElementText(O[L]);if(P.compareEndPoints("StartToStart",Q)>=0){break}N=O[L]}if(L!==0&&w.isText(O[L-1])){var R=document.body.createTextRange(),M=null;R.moveToElementText(N||J);R.collapse(!N);M=N?N.nextSibling:J.firstChild;var I=Q.duplicate();I.setEndPoint("StartToStart",R);var H=I.text.replace(/[\r\n]/g,"").length;while(H>M.nodeValue.length&&M.nextSibling){H-=M.nodeValue.length;M=M.nextSibling}var K=M.nodeValue;if(G&&M.nextSibling&&w.isText(M.nextSibling)&&H===M.nodeValue.length){H-=M.nodeValue.length;M=M.nextSibling}J=M;L=H}return{cont:J,offset:L}};var D=function(G){var J=function(M,P){var O,L;if(w.isText(M)){var K=w.listPrev(M,j.not(w.isText));var N=z.last(K).previousSibling;O=N||M.parentNode;P+=z.sum(z.tail(K),w.nodeLength);L=!N}else{O=M.childNodes[P]||M;if(w.isText(O)){return J(O,0)}P=0;L=false}return{node:O,collapseToStart:L,offset:P}};var H=document.body.createTextRange();var I=J(G.node,G.offset);H.moveToElementText(I.node);H.collapse(I.collapseToStart);H.moveStart("character",I.offset);return H};var E=function(L,K,H,G){this.sc=L;this.so=K;this.ec=H;this.eo=G;var J=function(){if(b.isW3CRangeSupport){var M=document.createRange();M.setStart(L,K);M.setEnd(H,G);return M}else{var N=D({node:L,offset:K});N.setEndPoint("EndToEnd",D({node:H,offset:G}));return N}};this.getPoints=function(){return{sc:L,so:K,ec:H,eo:G}};this.getStartPoint=function(){return{node:L,offset:K}};this.getEndPoint=function(){return{node:H,offset:G}};this.select=function(){var N=J();if(b.isW3CRangeSupport){var M=document.getSelection();if(M.rangeCount>0){M.removeAllRanges()}M.addRange(N)}else{N.select()}};this.normalize=function(){var O=function(P){if(!w.isVisiblePoint(P)){if(w.isLeftEdgePoint(P)){P=w.nextPointUntil(P,w.isVisiblePoint)}else{P=w.prevPointUntil(P,w.isVisiblePoint)}}return P};var N=O(this.getStartPoint());var M=O(this.getEndPoint());return new E(N.node,N.offset,M.node,M.offset)};this.nodes=function(O,P){O=O||j.ok;var M=P&&P.includeAncestor;var T=P&&P.fullyContains;var R=this.getStartPoint();var Q=this.getEndPoint();var N=[];var S=[];w.walkPoint(R,Q,function(U){if(w.isEditable(U.node)){return}var V;if(T){if(w.isLeftEdgePoint(U)){S.push(U.node)}if(w.isRightEdgePoint(U)&&z.contains(S,U.node)){V=U.node}}else{if(M){V=w.ancestor(U.node,O)}else{V=U.node}}if(V&&O(V)){N.push(V)}},true);return z.unique(N)};this.commonAncestor=function(){return w.commonAncestor(L,H)};this.expand=function(M){var O=w.ancestor(L,M);var P=w.ancestor(H,M);if(!O&&!P){return new E(L,K,H,G)}var N=this.getPoints();if(O){N.sc=O;N.so=0}if(P){N.ec=P;N.eo=w.nodeLength(P)}return new E(N.sc,N.so,N.ec,N.eo)};this.collapse=function(M){if(M){return new E(L,K,L,K)}else{return new E(H,G,H,G)}};this.splitText=function(){var M=L===H;var N=this.getPoints();if(w.isText(H)&&!w.isEdgePoint(this.getEndPoint())){H.splitText(G)}if(w.isText(L)&&!w.isEdgePoint(this.getStartPoint())){N.sc=L.splitText(K);N.so=0;if(M){N.ec=N.sc;N.eo=G-K}}return new E(N.sc,N.so,N.ec,N.eo)};this.deleteContents=function(){if(this.isCollapsed()){return this}var N=this.splitText();var O=N.nodes(null,{fullyContains:true});var M=w.prevPointUntil(N.getStartPoint(),function(Q){return !z.contains(O,Q.node)});var P=[];g.each(O,function(Q,S){var R=S.parentNode;if(M.node!==R&&w.nodeLength(R)===1){P.push(R)}w.remove(S,false)});g.each(P,function(Q,R){w.remove(R,false)});return new E(M.node,M.offset,M.node,M.offset).normalize()};var I=function(M){return function(){var N=w.ancestor(L,M);return !!N&&(N===w.ancestor(H,M))}};this.isOnEditable=I(w.isEditable);this.isOnList=I(w.isList);this.isOnAnchor=I(w.isAnchor);this.isOnCell=I(w.isCell);this.isLeftEdgeOf=function(M){if(!w.isLeftEdgePoint(this.getStartPoint())){return false}var N=w.ancestor(this.sc,M);return N&&w.isLeftEdgeOf(this.sc,N)};this.isCollapsed=function(){return L===H&&K===G};this.wrapBodyInlineWithPara=function(){if(w.isBodyContainer(L)&&w.isEmpty(L)){L.innerHTML=w.emptyPara;return new E(L.firstChild,0,L.firstChild,0)}if(w.isParaInline(L)||w.isPara(L)){return this.normalize()}var P;if(w.isInline(L)){var N=w.listAncestor(L,j.not(w.isInline));P=z.last(N);if(!w.isInline(P)){P=N[N.length-2]||L.childNodes[K]}}else{P=L.childNodes[K>0?K-1:0]}var O=w.listPrev(P,w.isParaInline).reverse();O=O.concat(w.listNext(P.nextSibling,w.isParaInline));if(O.length){var M=w.wrap(z.head(O),"p");w.appendChildNodes(M,z.tail(O))}return this.normalize()};this.insertNode=function(N){var M=this.wrapBodyInlineWithPara().deleteContents();var O=w.splitPoint(M.getStartPoint(),w.isInline(N));if(O.rightNode){O.rightNode.parentNode.insertBefore(N,O.rightNode)}else{O.container.appendChild(N)}return N};this.toString=function(){var M=J();return b.isW3CRangeSupport?M.toString():M.text};this.bookmark=function(M){return{s:{path:w.makeOffsetPath(M,L),offset:K},e:{path:w.makeOffsetPath(M,H),offset:G}}};this.paraBookmark=function(M){return{s:{path:z.tail(w.makeOffsetPath(z.head(M),L)),offset:K},e:{path:z.tail(w.makeOffsetPath(z.last(M),H)),offset:G}}};this.getClientRects=function(){var M=J();return M.getClientRects()}};return{create:function(L,I,K,G){if(!arguments.length){if(b.isW3CRangeSupport){var O=document.getSelection();if(O.rangeCount===0){return null}else{if(w.isBody(O.anchorNode)){return null}}var N=O.getRangeAt(0);L=N.startContainer;I=N.startOffset;K=N.endContainer;G=N.endOffset}else{var Q=document.selection.createRange();var J=Q.duplicate();J.collapse(false);var P=Q;P.collapse(true);var H=F(P,true),M=F(J,false);if(w.isText(H.node)&&w.isLeftEdgePoint(H)&&w.isTextNode(M.node)&&w.isRightEdgePoint(M)&&M.node.nextSibling===H.node){H=M}L=H.cont;I=H.offset;K=M.cont;G=M.offset}}else{if(arguments.length===2){K=L;G=I}}return new E(L,I,K,G)},createFromNode:function(I){var K=I;var J=0;var H=I;var G=w.nodeLength(H);if(w.isVoid(K)){J=w.listPrev(K).length-1;K=K.parentNode}if(w.isBR(H)){G=w.listPrev(H).length-1;H=H.parentNode}else{if(w.isVoid(H)){G=w.listPrev(H).length;H=H.parentNode}}return this.create(K,J,H,G)},createFromBookmark:function(I,J){var L=w.fromOffsetPath(I,J.s.path);var K=J.s.offset;var H=w.fromOffsetPath(I,J.e.path);var G=J.e.offset;return new E(L,K,H,G)},createFromParaBookmark:function(J,I){var K=J.s.offset;var G=J.e.offset;var L=w.fromOffsetPath(z.head(I),J.s.path);var H=w.fromOffsetPath(z.last(I),J.e.path);return new E(L,K,H,G)}}})();var A={version:"0.6.1",options:{width:null,height:null,minHeight:null,maxHeight:null,focus:false,tabsize:4,styleWithSpan:true,disableLinkTarget:false,disableDragAndDrop:false,disableResizeEditor:false,shortcuts:true,placeholder:false,prettifyHtml:true,codemirror:{mode:"text/html",htmlMode:true,lineNumbers:true},lang:"en-US",direction:null,toolbar:[["style",["style"]],["font",["bold","italic","underline","clear"]],["fontname",["fontname"]],["color",["color"]],["para",["ul","ol","paragraph"]],["height",["height"]],["table",["table"]],["insert",["link","picture","hr"]],["view",["fullscreen","codeview"]],["help",["help"]]],airMode:false,airPopover:[["color",["color"]],["font",["bold","underline","clear"]],["para",["ul","paragraph"]],["table",["table"]],["insert",["link","picture"]]],styleTags:["p","blockquote","pre","h1","h2","h3","h4","h5","h6"],defaultFontName:"Helvetica Neue",fontNames:["Arial","Arial Black","Comic Sans MS","Courier New","Helvetica Neue","Impact","Lucida Grande","Tahoma","Times New Roman","Verdana"],fontNamesIgnoreCheck:[],colors:[["#000000","#424242","#636363","#9C9C94","#CEC6CE","#EFEFEF","#F7F7F7","#FFFFFF"],["#FF0000","#FF9C00","#FFFF00","#00FF00","#00FFFF","#0000FF","#9C00FF","#FF00FF"],["#F7C6CE","#FFE7CE","#FFEFC6","#D6EFD6","#CEDEE7","#CEE7F7","#D6D6E7","#E7D6DE"],["#E79C9C","#FFC69C","#FFE79C","#B5D6A5","#A5C6CE","#9CC6EF","#B5A5D6","#D6A5BD"],["#E76363","#F7AD6B","#FFD663","#94BD7B","#73A5AD","#6BADDE","#8C7BC6","#C67BA5"],["#CE0000","#E79439","#EFC631","#6BA54A","#4A7B8C","#3984C6","#634AA5","#A54A7B"],["#9C0000","#B56308","#BD9400","#397B21","#104A5A","#085294","#311873","#731842"],["#630000","#7B3900","#846300","#295218","#083139","#003163","#21104A","#4A1031"]],lineHeights:["1.0","1.2","1.4","1.5","1.6","1.8","2.0","3.0"],insertTableMaxSize:{col:10,row:10},maximumImageFileSize:null,oninit:null,onfocus:null,onblur:null,onenter:null,onkeyup:null,onkeydown:null,onImageUpload:null,onImageUploadError:null,onMediaDelete:null,onToolbarClick:null,onsubmit:null,onCreateLink:function(D){if(D.indexOf("@")!==-1&&D.indexOf(":")===-1){D="mailto:"+D}else{if(D.indexOf("://")===-1){D="http://"+D}}return D},keyMap:{pc:{ENTER:"insertParagraph","CTRL+Z":"undo","CTRL+Y":"redo",TAB:"tab","SHIFT+TAB":"untab","CTRL+B":"bold","CTRL+I":"italic","CTRL+U":"underline","CTRL+SHIFT+S":"strikethrough","CTRL+BACKSLASH":"removeFormat","CTRL+SHIFT+L":"justifyLeft","CTRL+SHIFT+E":"justifyCenter","CTRL+SHIFT+R":"justifyRight","CTRL+SHIFT+J":"justifyFull","CTRL+SHIFT+NUM7":"insertUnorderedList","CTRL+SHIFT+NUM8":"insertOrderedList","CTRL+LEFTBRACKET":"outdent","CTRL+RIGHTBRACKET":"indent","CTRL+NUM0":"formatPara","CTRL+NUM1":"formatH1","CTRL+NUM2":"formatH2","CTRL+NUM3":"formatH3","CTRL+NUM4":"formatH4","CTRL+NUM5":"formatH5","CTRL+NUM6":"formatH6","CTRL+ENTER":"insertHorizontalRule","CTRL+K":"showLinkDialog"},mac:{ENTER:"insertParagraph","CMD+Z":"undo","CMD+SHIFT+Z":"redo",TAB:"tab","SHIFT+TAB":"untab","CMD+B":"bold","CMD+I":"italic","CMD+U":"underline","CMD+SHIFT+S":"strikethrough","CMD+BACKSLASH":"removeFormat","CMD+SHIFT+L":"justifyLeft","CMD+SHIFT+E":"justifyCenter","CMD+SHIFT+R":"justifyRight","CMD+SHIFT+J":"justifyFull","CMD+SHIFT+NUM7":"insertUnorderedList","CMD+SHIFT+NUM8":"insertOrderedList","CMD+LEFTBRACKET":"outdent","CMD+RIGHTBRACKET":"indent","CMD+NUM0":"formatPara","CMD+NUM1":"formatH1","CMD+NUM2":"formatH2","CMD+NUM3":"formatH3","CMD+NUM4":"formatH4","CMD+NUM5":"formatH5","CMD+NUM6":"formatH6","CMD+ENTER":"insertHorizontalRule","CMD+K":"showLinkDialog"}}},lang:{"en-US":{font:{bold:"Bold",italic:"Italic",underline:"Underline",clear:"Remove Font Style",height:"Line Height",name:"Font Family"},image:{image:"Picture",insert:"Insert Image",resizeFull:"Resize Full",resizeHalf:"Resize Half",resizeQuarter:"Resize Quarter",floatLeft:"Float Left",floatRight:"Float Right",floatNone:"Float None",shapeRounded:"Shape: Rounded",shapeCircle:"Shape: Circle",shapeThumbnail:"Shape: Thumbnail",shapeNone:"Shape: None",dragImageHere:"Drag image or text here",dropImage:"Drop image or Text",selectFromFiles:"Select from files",maximumFileSize:"Maximum file size",maximumFileSizeError:"Maximum file size exceeded.",url:"Image URL",remove:"Remove Image"},link:{link:"Link",insert:"Insert Link",unlink:"Unlink",edit:"Edit",textToDisplay:"Text to display",url:"To what URL should this link go?",openInNewWindow:"Open in new window"},table:{table:"Table"},hr:{insert:"Insert Horizontal Rule"},style:{style:"Style",normal:"Normal",blockquote:"Quote",pre:"Code",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6"},lists:{unordered:"Unordered list",ordered:"Ordered list"},options:{help:"Help",fullscreen:"Full Screen",codeview:"Code View"},paragraph:{paragraph:"Paragraph",outdent:"Outdent",indent:"Indent",left:"Align left",center:"Align center",right:"Align right",justify:"Justify full"},color:{recent:"Recent Color",more:"More Color",background:"Background Color",foreground:"Foreground Color",transparent:"Transparent",setTransparent:"Set transparent",reset:"Reset",resetToDefault:"Reset to default"},shortcut:{shortcuts:"Keyboard shortcuts",close:"Close",textFormatting:"Text formatting",action:"Action",paragraphFormatting:"Paragraph formatting",documentStyle:"Document Style",extraKeys:"Extra keys"},history:{undo:"Undo",redo:"Redo"}}}};var i=(function(){var D=function(F){return g.Deferred(function(G){g.extend(new FileReader(),{onload:function(I){var H=I.target.result;G.resolve(H)},onerror:function(){G.reject(this)}}).readAsDataURL(F)}).promise()};var E=function(G,F){return g.Deferred(function(H){var I=g("<img>");I.one("load",function(){I.off("error abort");H.resolve(I)}).one("error abort",function(){I.off("load").detach();H.reject(I)}).css({display:"none"}).appendTo(document.body).attr({src:G,"data-filename":F})}).promise()};return{readFileAsDataURL:D,createImage:E}})();var C={isEdit:function(D){return z.contains([8,9,13,32],D)},nameFromCode:{"8":"BACKSPACE","9":"TAB","13":"ENTER","32":"SPACE","48":"NUM0","49":"NUM1","50":"NUM2","51":"NUM3","52":"NUM4","53":"NUM5","54":"NUM6","55":"NUM7","56":"NUM8","66":"B","69":"E","73":"I","74":"J","75":"K","76":"L","82":"R","83":"S","85":"U","89":"Y","90":"Z","191":"SLASH","219":"LEFTBRACKET","220":"BACKSLASH","221":"RIGHTBRACKET"}};var a=function(){var D=function(G,F){if(b.jqueryVersion<1.9){var E={};g.each(F,function(H,I){E[I]=G.css(I)});return E}return G.css.call(G,F)};this.stylePara=function(E,F){g.each(E.nodes(w.isPara,{includeAncestor:true}),function(H,G){g(G).css(F)})};this.styleNodes=function(E,I){E=E.splitText();var L=I&&I.nodeName||"SPAN";var J=!!(I&&I.expandClosestSibling);var H=!!(I&&I.onlyPartialContains);if(E.isCollapsed()){return E.insertNode(w.create(L))}var G=w.makePredByNodeName(L);var F=g.map(E.nodes(w.isText,{fullyContains:true}),function(M){return w.singleChildAncestor(M,G)||w.wrap(M,L)});if(J){if(H){var K=E.nodes();G=j.and(G,function(M){return z.contains(K,M)})}return g.map(F,function(N){var P=w.withClosestSiblings(N,G);var M=z.head(P);var O=z.tail(P);g.each(O,function(Q,R){w.appendChildNodes(M,R.childNodes);w.remove(R)});return z.head(P)})}else{return F}};this.current=function(E,I){var L=g(w.isText(E.sc)?E.sc.parentNode:E.sc);var J=["font-family","font-size","text-align","list-style-type","line-height"];var H=D(L,J)||{};H["font-size"]=parseInt(H["font-size"],10);H["font-bold"]=document.queryCommandState("bold")?"bold":"normal";H["font-italic"]=document.queryCommandState("italic")?"italic":"normal";H["font-underline"]=document.queryCommandState("underline")?"underline":"normal";H["font-strikethrough"]=document.queryCommandState("strikeThrough")?"strikethrough":"normal";H["font-superscript"]=document.queryCommandState("superscript")?"superscript":"normal";H["font-subscript"]=document.queryCommandState("subscript")?"subscript":"normal";if(!E.isOnList()){H["list-style"]="none"}else{var G=["circle","disc","disc-leading-zero","square"];var F=g.inArray(H["list-style-type"],G)>-1;H["list-style"]=F?"unordered":"ordered"}var M=w.ancestor(E.sc,w.isPara);if(M&&M.style["line-height"]){H["line-height"]=M.style.lineHeight}else{var K=parseInt(H["line-height"],10)/parseInt(H["font-size"],10);H["line-height"]=K.toFixed(1)}H.image=w.isImg(I)&&I;H.anchor=E.isOnAnchor()&&w.ancestor(E.sc,w.isAnchor);H.ancestors=w.listAncestor(E.sc,w.isEditable);H.range=E;return H}};var B=function(){this.insertTab=function(F,E,D){var G=w.createText(new Array(D+1).join(w.NBSP_CHAR));E=E.deleteContents();E.insertNode(G,true);E=n.create(G,D);E.select()};this.insertParagraph=function(){var E=n.create();E=E.deleteContents();E=E.wrapBodyInlineWithPara();var H=w.ancestor(E.sc,w.isPara);var G;if(H){G=w.splitTree(H,E.getStartPoint());var D=w.listDescendant(H,w.isEmptyAnchor);D=D.concat(w.listDescendant(G,w.isEmptyAnchor));g.each(D,function(I,J){w.remove(J)})}else{var F=E.sc.childNodes[E.so];G=g(w.emptyPara)[0];if(F){E.sc.insertBefore(G,F)}else{E.sc.appendChild(G)}}n.create(G,0).normalize().select()}};var e=function(){this.tab=function(E,G){var D=w.ancestor(E.commonAncestor(),w.isCell);var I=w.ancestor(D,w.isTable);var F=w.listDescendant(I,w.isCell);var H=z[G?"prev":"next"](F,D);if(H){n.create(H,0).select()}};this.createTable=function(I,F){var H=[],E;for(var G=0;G<I;G++){H.push("<td>"+w.blank+"</td>")}E=H.join("");var D=[],J;for(var K=0;K<F;K++){D.push("<tr>"+E+"</tr>")}J=D.join("");return g('<table class="table table-bordered">'+J+"</table>")[0]}};var k=function(){this.insertOrderedList=function(){this.toggleList("OL")};this.insertUnorderedList=function(){this.toggleList("UL")};this.indent=function(){var E=this;var D=n.create().wrapBodyInlineWithPara();var F=D.nodes(w.isPara,{includeAncestor:true});var G=z.clusterBy(F,j.peq2("parentNode"));g.each(G,function(H,I){var J=z.head(I);if(w.isLi(J)){E.wrapList(I,J.parentNode.nodeName)}else{g.each(I,function(L,K){g(K).css("marginLeft",function(M,N){return(parseInt(N,10)||0)+25})})}});D.select()};this.outdent=function(){var E=this;var D=n.create().wrapBodyInlineWithPara();var F=D.nodes(w.isPara,{includeAncestor:true});var G=z.clusterBy(F,j.peq2("parentNode"));g.each(G,function(H,I){var J=z.head(I);if(w.isLi(J)){E.releaseList([I])}else{g.each(I,function(L,K){g(K).css("marginLeft",function(M,N){N=(parseInt(N,10)||0);return N>25?N-25:""})})}});D.select()};this.toggleList=function(H){var E=this;var D=n.create().wrapBodyInlineWithPara();var G=D.nodes(w.isPara,{includeAncestor:true});var I=D.paraBookmark(G);var K=z.clusterBy(G,j.peq2("parentNode"));if(z.find(G,w.isPurePara)){var F=[];g.each(K,function(L,M){F=F.concat(E.wrapList(M,H))});G=F}else{var J=D.nodes(w.isList,{includeAncestor:true}).filter(function(L){return !g.nodeName(L,H)});if(J.length){g.each(J,function(L,M){w.replace(M,H)})}else{G=this.releaseList(K,true)}}n.createFromParaBookmark(I,G).select()};this.wrapList=function(G,F){var H=z.head(G);var J=z.last(G);var E=w.isList(H.previousSibling)&&H.previousSibling;var D=w.isList(J.nextSibling)&&J.nextSibling;var I=E||w.insertAfter(w.create(F||"UL"),J);G=g.map(G,function(K){return w.isPurePara(K)?w.replace(K,"LI"):K});w.appendChildNodes(I,G);if(D){w.appendChildNodes(I,z.from(D.childNodes));w.remove(D)}return G};this.releaseList=function(F,D){var E=[];g.each(F,function(G,H){var I=z.head(H);var J=z.last(H);var M=D?w.lastAncestor(I,w.isList):I.parentNode;var L=M.childNodes.length>1?w.splitTree(M,{node:J.parentNode,offset:w.position(J)+1},true):null;var K=w.splitTree(M,{node:I.parentNode,offset:w.position(I)},true);H=D?w.listDescendant(K,w.isLi):z.from(K.childNodes).filter(w.isLi);if(D||!w.isList(M.parentNode)){H=g.map(H,function(O){return w.replace(O,"P")})}g.each(z.from(H).reverse(),function(P,O){w.insertAfter(O,M)});var N=z.compact([M,K,L]);g.each(N,function(O,P){var Q=[P].concat(w.listDescendant(P,w.isList));g.each(Q.reverse(),function(R,S){if(!w.nodeLength(S)){w.remove(S,true)}})});E=E.concat(H)});return E}};var r=function(){var E=new a();var M=new e();var K=new B();var D=new k();this.createRange=function(O){O.focus();return n.create()};this.saveRange=function(O,P){O.focus();O.data("range",n.create());if(P){n.create().collapse().select()}};this.saveNode=function(P){var R=[];for(var Q=0,O=P[0].childNodes.length;Q<O;Q++){R.push(P[0].childNodes[Q])}P.data("childNodes",R)};this.restoreRange=function(P){var O=P.data("range");if(O){O.select();P.focus()}};this.restoreNode=function(P){P.html("");var R=P.data("childNodes");for(var Q=0,O=R.length;Q<O;Q++){P[0].appendChild(R[Q])}};this.currentStyle=function(P){var O=n.create();return O?O.isOnEditable()&&E.current(O,P):false};var L=this.triggerOnBeforeChange=function(P){var O=P.data("callbacks").onBeforeChange;if(O){O(P.html(),P)}};var G=this.triggerOnChange=function(P){var O=P.data("callbacks").onChange;if(O){O(P.html(),P)}};this.undo=function(O){L(O);O.data("NoteHistory").undo();G(O)};this.redo=function(O){L(O);O.data("NoteHistory").redo();G(O)};var J=this.beforeCommand=function(O){L(O)};var N=this.afterCommand=function(O){O.data("NoteHistory").recordUndo();G(O)};var F=["bold","italic","underline","strikethrough","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","formatBlock","removeFormat","backColor","foreColor","insertHorizontalRule","fontName"];for(var I=0,H=F.length;I<H;I++){this[F[I]]=(function(O){return function(P,Q){J(P);document.execCommand(O,false,Q);N(P)}})(F[I])}this.tab=function(P,Q){var O=n.create();if(O.isCollapsed()&&O.isOnCell()){M.tab(O)}else{J(P);K.insertTab(P,O,Q.tabsize);N(P)}};this.untab=function(){var O=n.create();if(O.isCollapsed()&&O.isOnCell()){M.tab(O,true)}};this.insertParagraph=function(O){J(O);K.insertParagraph(O);N(O)};this.insertOrderedList=function(O){J(O);D.insertOrderedList(O);N(O)};this.insertUnorderedList=function(O){J(O);D.insertUnorderedList(O);N(O)};this.indent=function(O){J(O);D.indent(O);N(O)};this.outdent=function(O){J(O);D.outdent(O);N(O)};this.insertImage=function(P,Q,O){i.createImage(Q,O).then(function(R){J(P);R.css({display:"",width:Math.min(P.width(),R.width())});n.create().insertNode(R[0]);n.createFromNode(R[0]).collapse().select();N(P)}).fail(function(){var R=P.data("callbacks");if(R.onImageUploadError){R.onImageUploadError()}})};this.insertNode=function(P,Q){J(P);var O=this.createRange(P);O.insertNode(Q);n.createFromNode(Q).collapse().select();N(P)};this.insertText=function(P,R){J(P);var O=this.createRange(P);var Q=O.insertNode(w.createText(R));n.create(Q,w.nodeLength(Q)).select();N(P)};this.formatBlock=function(O,P){J(O);P=b.isMSIE?"<"+P+">":P;document.execCommand("FormatBlock",false,P);N(O)};this.formatPara=function(O){J(O);this.formatBlock(O,"P");N(O)};for(var I=1;I<=6;I++){this["formatH"+I]=function(O){return function(P){this.formatBlock(P,"H"+O)}}(I)}this.fontSize=function(O,P){J(O);document.execCommand("fontSize",false,3);if(b.isFF){O.find("font[size=3]").removeAttr("size").css("font-size",P+"px")}else{O.find("span").filter(function(){return this.style.fontSize==="medium"}).css("font-size",P+"px")}N(O)};this.lineHeight=function(O,P){J(O);E.stylePara(n.create(),{lineHeight:P});N(O)};this.unlink=function(P){var O=n.create();if(O.isOnAnchor()){var Q=w.ancestor(O.sc,w.isAnchor);O=n.createFromNode(Q);O.select();J(P);document.execCommand("unlink");N(P)}};this.createLink=function(Z,U,ab){var V=U.url;var R=U.text;var Y=U.newWindow;var O=U.range;var aa=O.toString()!==R;J(Z);if(ab.onCreateLink){V=ab.onCreateLink(V)}var P;if(aa){var T=O.insertNode(g("<A>"+R+"</A>")[0]);P=[T]}else{P=E.styleNodes(O,{nodeName:"A",expandClosestSibling:true,onlyPartialContains:true})}g.each(P,function(ac,ad){g(ad).attr({href:V,target:Y?"_blank":""})});var X=n.createFromNode(z.head(P)).collapse(true);var Q=X.getStartPoint();var S=n.createFromNode(z.last(P)).collapse();var W=S.getEndPoint();n.create(Q.node,Q.offset,W.node,W.offset).select();N(Z)};this.getLinkInfo=function(P){P.focus();var O=n.create().expand(w.isAnchor);var Q=g(z.head(O.nodes(w.isAnchor)));return{range:O,text:O.toString(),isNewWindow:Q.length?Q.attr("target")==="_blank":true,url:Q.length?Q.attr("href"):""}};this.color=function(P,Q){var S=JSON.parse(Q);var R=S.foreColor,O=S.backColor;J(P);if(R){document.execCommand("foreColor",false,R)}if(O){document.execCommand("backColor",false,O)}N(P)};this.insertTable=function(Q,O){var R=O.split("x");J(Q);var P=n.create();P=P.deleteContents();P.insertNode(M.createTable(R[0],R[1]));N(Q)};this.floatMe=function(P,Q,O){J(P);O.css("float",Q);N(P)};this.imageShape=function(P,Q,O){J(P);O.removeClass("img-rounded img-circle img-thumbnail");if(Q){O.addClass(Q)}N(P)};this.resize=function(P,Q,O){J(P);O.css({width:Q*100+"%",height:""});N(P)};this.resizeTo=function(T,O,P){var S;if(P){var R=T.y/T.x;var Q=O.data("ratio");S={width:Q>R?T.x:T.y/Q,height:Q>R?T.x*Q:T.y}}else{S={width:T.x,height:T.y}}O.css(S)};this.removeMedia=function(P,R,O){J(P);O.detach();var Q=P.data("callbacks");if(Q&&Q.onMediaDelete){Q.onMediaDelete(O,this,P)}N(P)}};var d=function(G){var E=[],F=-1;var H=G[0];var D=function(){var J=n.create();var K={s:{path:[0],offset:0},e:{path:[0],offset:0}};return{contents:G.html(),bookmark:(J?J.bookmark(H):K)}};var I=function(J){if(J.contents!==null){G.html(J.contents)}if(J.bookmark!==null){n.createFromBookmark(H,J.bookmark).select()}};this.undo=function(){if(0<F){F--;I(E[F])}};this.redo=function(){if(E.length-1>F){F++;I(E[F])}};this.recordUndo=function(){F++;if(E.length>F){E=E.slice(0,F)}E.push(D())};this.recordUndo()};var m=function(){this.update=function(N,I){var E=function(O,P){O.find(".dropdown-menu li a").each(function(){var Q=(g(this).data("value")+"")===(P+"");this.className=Q?"checked":""})};var L=function(O,P){var Q=N.find(O);Q.toggleClass("active",P())};if(I.image){var F=g(I.image);L('button[data-event="imageShape"][data-value="img-rounded"]',function(){return F.hasClass("img-rounded")});L('button[data-event="imageShape"][data-value="img-circle"]',function(){return F.hasClass("img-circle")});L('button[data-event="imageShape"][data-value="img-thumbnail"]',function(){return F.hasClass("img-thumbnail")});L('button[data-event="imageShape"]:not([data-value])',function(){return !F.is(".img-rounded, .img-circle, .img-thumbnail")});var M=F.css("float");L('button[data-event="floatMe"][data-value="left"]',function(){return M==="left"});L('button[data-event="floatMe"][data-value="right"]',function(){return M==="right"});L('button[data-event="floatMe"][data-value="none"]',function(){return M!=="left"&&M!=="right"});var G=F.attr("style");L('button[data-event="resize"][data-value="1"]',function(){return !!/(^|\s)(max-)?width\s*:\s*100%/.test(G)});L('button[data-event="resize"][data-value="0.5"]',function(){return !!/(^|\s)(max-)?width\s*:\s*50%/.test(G)});L('button[data-event="resize"][data-value="0.25"]',function(){return !!/(^|\s)(max-)?width\s*:\s*25%/.test(G)});return}var H=N.find(".note-fontname");if(H.length){var K=I["font-family"];if(!!K){K=z.head(K.split(","));K=K.replace(/\'/g,"");H.find(".note-current-fontname").text(K);E(H,K)}}var D=N.find(".note-fontsize");D.find(".note-current-fontsize").text(I["font-size"]);E(D,parseFloat(I["font-size"]));var J=N.find(".note-height");E(J,parseFloat(I["line-height"]));L('button[data-event="bold"]',function(){return I["font-bold"]==="bold"});L('button[data-event="italic"]',function(){return I["font-italic"]==="italic"});L('button[data-event="underline"]',function(){return I["font-underline"]==="underline"});L('button[data-event="strikethrough"]',function(){return I["font-strikethrough"]==="strikethrough"});L('button[data-event="superscript"]',function(){return I["font-superscript"]==="superscript"});L('button[data-event="subscript"]',function(){return I["font-subscript"]==="subscript"});L('button[data-event="justifyLeft"]',function(){return I["text-align"]==="left"||I["text-align"]==="start"});L('button[data-event="justifyCenter"]',function(){return I["text-align"]==="center"});L('button[data-event="justifyRight"]',function(){return I["text-align"]==="right"});L('button[data-event="justifyFull"]',function(){return I["text-align"]==="justify"});L('button[data-event="insertUnorderedList"]',function(){return I["list-style"]==="unordered"});L('button[data-event="insertOrderedList"]',function(){return I["list-style"]==="ordered"})};this.updateRecentColor=function(E,D,I){var J=g(E).closest(".note-color");var G=J.find(".note-recent-color");var F=JSON.parse(G.attr("data-value"));F[D]=I;G.attr("data-value",JSON.stringify(F));var H=D==="backColor"?"background-color":"color";G.find("i").css(H,I)}};var c=function(){var D=new m();this.update=function(E,F){D.update(E,F)};this.updateRecentColor=function(F,E,G){D.updateRecentColor(F,E,G)};this.activate=function(E){E.find("button").not('button[data-event="codeview"]').removeClass("disabled")};this.deactivate=function(E){E.find("button").not('button[data-event="codeview"]').addClass("disabled")};this.updateFullscreen=function(G,F){var E=G.find('button[data-event="fullscreen"]');E.toggleClass("active",F)};this.updateCodeview=function(G,E){var F=G.find('button[data-event="codeview"]');F.toggleClass("active",E)}};var y=function(){var E=new m();var D=function(K,J){var I=g(K);var L=J?I.offset():I.position();var H=I.outerHeight(true);return{left:L.left,top:L.top+H}};var G=function(H,I){H.css({display:"block",left:I.left,top:I.top})};var F=20;this.update=function(K,L,J){E.update(K,L);var M=K.find(".note-link-popover");if(L.anchor){var Q=M.find("a");var I=g(L.anchor).attr("href");Q.attr("href",I).html(I);G(M,D(L.anchor,J))}else{M.hide()}var H=K.find(".note-image-popover");if(L.image){G(H,D(L.image,J))}else{H.hide()}var N=K.find(".note-air-popover");if(J&&!L.range.isCollapsed()){var P=z.last(L.range.getClientRects());if(P){var O=j.rect2bnd(P);G(N,{left:Math.max(O.left+O.width/2-F,0),top:O.top+O.height})}}else{N.hide()}};this.updateRecentColor=function(I,H,J){I.updateRecentColor(I,H,J)};this.hide=function(H){H.children().hide()}};var x=function(){this.update=function(K,I,G){var D=K.find(".note-control-selection");if(I.image){var E=g(I.image);var J=G?E.offset():E.position();var F={w:E.outerWidth(true),h:E.outerHeight(true)};D.css({display:"block",left:J.left,top:J.top,width:F.w,height:F.h}).data("target",I.image);var H=F.w+"x"+F.h;D.find(".note-control-selection-info").text(H)}else{D.hide()}};this.hide=function(D){D.children().hide()}};var h=function(){var D=function(F,E){F.toggleClass("disabled",!E);F.attr("disabled",!E)};this.showImageDialog=function(E,F){return g.Deferred(function(I){var K=F.find(".note-image-dialog");var J=F.find(".note-image-input"),G=F.find(".note-image-url"),H=F.find(".note-image-btn");K.one("shown.bs.modal",function(){J.replaceWith(J.clone().on("change",function(){I.resolve(this.files||this.value);K.modal("hide")}).val(""));H.click(function(L){L.preventDefault();I.resolve(G.val());K.modal("hide")});G.on("keyup paste",function(M){var L;if(M.type==="paste"){L=M.originalEvent.clipboardData.getData("text")}else{L=G.val()}D(H,L)}).val("").trigger("focus")}).one("hidden.bs.modal",function(){J.off("change");G.off("keyup paste");H.off("click");if(I.state()==="pending"){I.reject()}}).modal("show")})};this.showLinkDialog=function(E,G,F){return g.Deferred(function(K){var L=G.find(".note-link-dialog");var J=L.find(".note-link-text"),M=L.find(".note-link-url"),I=L.find(".note-link-btn"),H=L.find("input[type=checkbox]");L.one("shown.bs.modal",function(){J.val(F.text);J.on("input",function(){F.text=J.val()});if(!F.url){F.url=F.text;D(I,F.text)}M.on("input",function(){D(I,M.val());if(!F.text){J.val(M.val())}}).val(F.url).trigger("focus").trigger("select");H.prop("checked",F.newWindow);I.one("click",function(N){N.preventDefault();K.resolve({range:F.range,url:M.val(),text:J.val(),newWindow:H.is(":checked")});L.modal("hide")})}).one("hidden.bs.modal",function(){J.off("input");M.off("input");I.off("click");if(K.state()==="pending"){K.reject()}}).modal("show")}).promise()};this.showHelpDialog=function(E,F){return g.Deferred(function(G){var H=F.find(".note-help-dialog");H.one("hidden.bs.modal",function(){G.resolve()}).modal("show")}).promise()}};var t;if(b.hasCodeMirror){if(b.isSupportAmd){require(["CodeMirror"],function(D){t=D})}else{t=window.CodeMirror}}var l=function(){var O=g(window);var aa=g(document);var X=g("html, body");var F=new r();var N=new c(),H=new y();var Z=new x(),W=new h();this.getEditor=function(){return F};var G=function(ac){var ab=g(ac).closest(".note-editor, .note-air-editor, .note-air-layout");if(!ab.length){return null}var ad;if(ab.is(".note-editor, .note-air-editor")){ad=ab}else{ad=g("#note-editor-"+z.last(ab.attr("id").split("-")))}return w.buildLayoutInfo(ad)};var D=function(ag,ae){var af=ag.editor(),ab=ag.editable();var ad=ab.data("callbacks");var ac=af.data("options");if(ad.onImageUpload){ad.onImageUpload(ae,F,ab)}else{g.each(ae,function(ah,aj){var ai=aj.name;if(ac.maximumImageFileSize&&ac.maximumImageFileSize<aj.size){if(ad.onImageUploadError){ad.onImageUploadError(ac.langInfo.image.maximumFileSizeError)}else{alert(ac.langInfo.image.maximumFileSizeError)}}else{i.readFileAsDataURL(aj).then(function(ak){F.insertImage(ab,ak,ai)}).fail(function(){if(ad.onImageUploadError){ad.onImageUploadError()}})}})}};var J={showLinkDialog:function(ag){var af=ag.editor(),ae=ag.dialog(),ab=ag.editable(),ad=F.getLinkInfo(ab);var ac=af.data("options");F.saveRange(ab);W.showLinkDialog(ab,ae,ad).then(function(ah){F.restoreRange(ab);F.createLink(ab,ah,ac);H.hide(ag.popover())}).fail(function(){F.restoreRange(ab)})},showImageDialog:function(ad){var ac=ad.dialog(),ab=ad.editable();F.saveRange(ab);W.showImageDialog(ab,ac).then(function(ae){F.restoreRange(ab);if(typeof ae==="string"){F.insertImage(ab,ae)}else{D(ad,ae)}}).fail(function(){F.restoreRange(ab)})},showHelpDialog:function(ad){var ac=ad.dialog(),ab=ad.editable();F.saveRange(ab,true);W.showHelpDialog(ab,ac).then(function(){F.restoreRange(ab)})},fullscreen:function(ah){var ag=ah.editor(),ae=ah.toolbar(),ac=ah.editable(),ab=ah.codable();var ad=function(ai){ac.css("height",ai.h);ab.css("height",ai.h);if(ab.data("cmeditor")){ab.data("cmeditor").setsize(null,ai.h)}};ag.toggleClass("fullscreen");var af=ag.hasClass("fullscreen");if(af){ac.data("orgheight",ac.css("height"));O.on("resize",function(){ad({h:O.height()-ae.outerHeight()})}).trigger("resize");X.css("overflow","hidden")}else{O.off("resize");ad({h:ac.data("orgheight")});X.css("overflow","visible")}N.updateFullscreen(ae,af)},codeview:function(ag){var ad=ag.editor(),ae=ag.toolbar(),ak=ag.editable(),ai=ag.codable(),ah=ag.popover(),ac=ag.handle();var al=ad.data("options");var ab,af;ad.toggleClass("codeview");var aj=ad.hasClass("codeview");if(aj){ai.val(w.html(ak,al.prettifyHtml));ai.height(ak.height());N.deactivate(ae);H.hide(ah);Z.hide(ac);ai.focus();if(b.hasCodeMirror){ab=t.fromTextArea(ai[0],al.codemirror);if(al.codemirror.tern){af=new t.TernServer(al.codemirror.tern);ab.ternServer=af;ab.on("cursorActivity",function(am){af.updateArgHints(am)})}ab.setSize(null,ak.outerHeight());ai.data("cmEditor",ab)}}else{if(b.hasCodeMirror){ab=ai.data("cmEditor");ai.val(ab.getValue());ab.toTextArea()}ak.html(w.value(ai,al.prettifyHtml)||w.emptyPara);ak.height(al.height?ai.height():"auto");N.activate(ae);ak.focus()}N.updateCodeview(ag.toolbar(),aj)}};var M=function(ab){if(w.isImg(ab.target)){ab.preventDefault()}};var P=function(ab){setTimeout(function(){var ad=G(ab.currentTarget||ab.target);var ae=F.currentStyle(ab.target);if(!ae){return}var ac=ad.editor().data("options").airMode;if(!ac){N.update(ad.toolbar(),ae)}H.update(ad.popover(),ae,ac);Z.update(ad.handle(),ae,ac)},0)};var V=function(ab){var ac=G(ab.currentTarget||ab.target);H.hide(ac.popover());Z.hide(ac.handle())};var Q=function(af){var ah=af.originalEvent.clipboardData;var ag=G(af.currentTarget||af.target);var ab=ag.editable();if(!ah||!ah.items||!ah.items.length){var ae=ab.data("callbacks");if(!ae.onImageUpload){return}F.saveNode(ab);F.saveRange(ab);ab.html("");setTimeout(function(){var al=ab.find("img");var ak=al[0].src;var am=atob(ak.split(",")[1]);var an=new Uint8Array(am.length);for(var aj=0;aj<am.length;aj++){an[aj]=am.charCodeAt(aj)}var ai=new Blob([an],{type:"image/png"});ai.name="clipboard.png";F.restoreNode(ab);F.restoreRange(ab);D(ag,[ai]);F.afterCommand(ab)},0);return}var ad=z.head(ah.items);var ac=ad.kind==="file"&&ad.type.indexOf("image/")!==-1;if(ac){D(ag,[ad.getAsFile()])}F.afterCommand(ab)};var I=function(ab){if(w.isControlSizing(ab.target)){ab.preventDefault();ab.stopPropagation();var ah=G(ab.target),ac=ah.handle(),aj=ah.popover(),al=ah.editable(),ad=ah.editor();var ak=ac.find(".note-control-selection").data("target"),af=g(ak),ai=af.offset(),ae=aa.scrollTop();var ag=ad.data("options").airMode;aa.on("mousemove",function(am){F.resizeTo({x:am.clientX-ai.left,y:am.clientY-(ai.top-ae)},af,!am.shiftKey);Z.update(ac,{image:ak},ag);H.update(aj,{image:ak},ag)}).one("mouseup",function(){aa.off("mousemove");F.afterCommand(al)});if(!af.data("ratio")){af.data("ratio",af.height()/af.width())}}};var U=function(ac){var ab=g(ac.target).closest("[data-event]");if(ab.length){ac.preventDefault()}};var Y=function(ab){var ai=g(ab.target).closest("[data-event]");if(ai.length){var ah=ai.attr("data-event"),aj=ai.attr("data-value"),ag=ai.attr("data-hide");var ae=G(ab.target);var ad;if(g.inArray(ah,["resize","floatMe","removeMedia","imageShape"])!==-1){var af=ae.handle().find(".note-control-selection");ad=g(af.data("target"))}if(ag){ai.parents(".popover").hide()}if(g.isFunction(g.summernote.pluginEvents[ah])){g.summernote.pluginEvents[ah](ab,F,ae,aj)}else{if(F[ah]){var ak=ae.editable();ak.trigger("focus");F[ah](ak,aj,ad);ab.preventDefault()}else{if(J[ah]){J[ah].call(this,ae);ab.preventDefault()}}}if(g.inArray(ah,["backColor","foreColor"])!==-1){var al=ae.editor().data("options",al);var ac=al.airMode?H:N;ac.updateRecentColor(z.head(ai),ah,aj)}P(ab)}};var S=24;var L=function(ad){ad.preventDefault();ad.stopPropagation();var ab=G(ad.target).editable();var af=ab.offset().top-aa.scrollTop();var ae=G(ad.currentTarget||ad.target);var ac=ae.editor().data("options");aa.on("mousemove",function(ah){var ag=ah.clientY-(af+S);ag=(ac.minHeight>0)?Math.max(ag,ac.minHeight):ag;ag=(ac.maxHeight>0)?Math.min(ag,ac.maxHeight):ag;ab.height(ag)}).one("mouseup",function(){aa.off("mousemove")})};var R=18;var T=function(ac,ak){var ae=g(ac.target.parentNode);var ad=ae.next();var aj=ae.find(".note-dimension-picker-mousecatcher");var af=ae.find(".note-dimension-picker-highlighted");var ag=ae.find(".note-dimension-picker-unhighlighted");var ai;if(ac.offsetX===undefined){var ab=g(ac.target).offset();ai={x:ac.pageX-ab.left,y:ac.pageY-ab.top}}else{ai={x:ac.offsetX,y:ac.offsetY}}var ah={c:Math.ceil(ai.x/R)||1,r:Math.ceil(ai.y/R)||1};af.css({width:ah.c+"em",height:ah.r+"em"});aj.attr("data-value",ah.c+"x"+ah.r);if(3<ah.c&&ah.c<ak.insertTableMaxSize.col){ag.css({width:ah.c+1+"em"})}if(3<ah.r&&ah.r<ak.insertTableMaxSize.row){ag.css({height:ah.r+1+"em"})}ad.html(ah.c+" x "+ah.r)};var K=function(ac,ab){if(ab.disableDragAndDrop){aa.on("drop",function(ad){ad.preventDefault()})}else{E(ac,ab)}};var E=function(ad,ab){var ae=g(),af=ad.dropzone,ac=ad.dropzone.find(".note-dropzone-message");aa.on("dragenter",function(ah){var ag=ad.editor.hasClass("codeview");if(!ag&&!ae.length){ad.editor.addClass("dragover");af.width(ad.editor.width());af.height(ad.editor.height());ac.text(ab.langInfo.image.dragImageHere)}ae=ae.add(ah.target)}).on("dragleave",function(ag){ae=ae.not(ag.target);if(!ae.length){ad.editor.removeClass("dragover")}}).on("drop",function(){ae=g();ad.editor.removeClass("dragover")}).on("mouseout",function(ag){ae=ae.not(ag.target);if(!ae.length){ad.editor.removeClass("dragover")}});af.on("dragenter",function(){af.addClass("hover");ac.text(ab.langInfo.image.dropImage)}).on("dragleave",function(){af.removeClass("hover");ac.text(ab.langInfo.image.dragImageHere)});af.on("drop",function(ah){ah.preventDefault();var ai=ah.originalEvent.dataTransfer;var ag=ai.getData("text/html");var ak=ai.getData("text/plain");var aj=G(ah.currentTarget||ah.target);if(ai&&ai.files&&ai.files.length){aj.editable().focus();D(aj,ai.files)}else{if(ag){g(ag).each(function(){aj.editable().focus();F.insertNode(aj.editable(),this)})}else{if(ak){aj.editable().focus();F.insertText(aj.editable(),ak)}}}}).on("dragover",false)};this.bindKeyMap=function(ad,ae){var ac=ad.editor;var ab=ad.editable;ad=G(ab);ab.on("keydown",function(aj){var ai=[];if(aj.metaKey){ai.push("CMD")}if(aj.ctrlKey&&!aj.altKey){ai.push("CTRL")}if(aj.shiftKey){ai.push("SHIFT")}var ag=C.nameFromCode[aj.keyCode];if(ag){ai.push(ag)}var af=ae[ai.join("+")];if(af){if(g.summernote.pluginEvents[af]){var ah=g.summernote.pluginEvents[af];if(g.isFunction(ah)){ah(aj,F,ad)}}else{if(F[af]){F[af](ab,ac.data("options"));aj.preventDefault()}else{if(J[af]){J[af].call(this,ad);aj.preventDefault()}}}}else{if(C.isEdit(aj.keyCode)){F.afterCommand(ab)}}})};this.attach=function(ag,ac){if(ac.shortcuts){this.bindKeyMap(ag,ac.keyMap[b.isMac?"mac":"pc"])}ag.editable.on("mousedown",M);ag.editable.on("keyup mouseup",P);ag.editable.on("scroll",V);ag.editable.on("paste",Q);ag.handle.on("mousedown",I);ag.popover.on("click",Y);ag.popover.on("mousedown",U);if(!ac.airMode){K(ag,ac);ag.toolbar.on("click",Y);ag.toolbar.on("mousedown",U);if(!ac.disableResizeEditor){ag.statusbar.on("mousedown",L)}}var ab=ac.airMode?ag.popover:ag.toolbar;var ah=ab.find(".note-dimension-picker-mousecatcher");ah.css({width:ac.insertTableMaxSize.col+"em",height:ac.insertTableMaxSize.row+"em"}).on("mousemove",function(ai){T(ai,ac)});ag.editor.data("options",ac);if(!b.isMSIE){setTimeout(function(){document.execCommand("styleWithCSS",0,ac.styleWithSpan)},0)}var af=new d(ag.editable);ag.editable.data("NoteHistory",af);if(ac.onenter){ag.editable.keypress(function(ai){if(ai.keyCode===C.ENTER){ac.onenter(ai)}})}if(ac.onfocus){ag.editable.focus(ac.onfocus)}if(ac.onblur){ag.editable.blur(ac.onblur)}if(ac.onkeyup){ag.editable.keyup(ac.onkeyup)}if(ac.onkeydown){ag.editable.keydown(ac.onkeydown)}if(ac.onpaste){ag.editable.on("paste",ac.onpaste)}if(ac.onToolbarClick){ag.toolbar.click(ac.onToolbarClick)}if(ac.onChange){var ad=function(){F.triggerOnChange(ag.editable)};if(b.isMSIE){var ae="DOMCharacterDataModified DOMSubtreeModified DOMNodeInserted";ag.editable.on(ae,ad)}else{ag.editable.on("input",ad)}}ag.editable.data("callbacks",{onBeforeChange:ac.onBeforeChange,onChange:ac.onChange,onAutoSave:ac.onAutoSave,onImageUpload:ac.onImageUpload,onImageUploadError:ac.onImageUploadError,onFileUpload:ac.onFileUpload,onFileUploadError:ac.onFileUpload,onMediaDelete:ac.onMediaDelete})};this.detach=function(ac,ab){ac.editable.off();ac.popover.off();ac.handle.off();ac.dialog.off();if(!ab.airMode){ac.dropzone.off();ac.toolbar.off();ac.statusbar.off()}}};var s=function(){var F=function(Z,Y){var ac=Y.event;var ad=Y.value;var ae=Y.title;var ab=Y.className;var af=Y.dropdown;var aa=Y.hide;return'<button type="button" class="btn btn-default btn-sm btn-small'+(ab?" "+ab:"")+(af?" dropdown-toggle":"")+'"'+(af?' data-toggle="dropdown"':"")+(ae?' title="'+ae+'"':"")+(ac?' data-event="'+ac+'"':"")+(ad?" data-value='"+ad+"'":"")+(aa?" data-hide='"+aa+"'":"")+' tabindex="-1">'+Z+(af?' <span class="caret"></span>':"")+"</button>"+(af||"")};var J=function(aa,Z){var Y='<i class="'+aa+'"></i>';return F(Y,Z)};var O=function(Y,Z){return'<div class="'+Y+' popover bottom in" style="display: none;"><div class="arrow"></div><div class="popover-content">'+Z+"</div></div>"};var X=function(Z,aa,Y,ab){return'<div class="'+Z+' modal" aria-hidden="false"><div class="modal-dialog"><div class="modal-content">'+(aa?'<div class="modal-header"><button type="button" class="close" aria-hidden="true" tabindex="-1">&times;</button><h4 class="modal-title">'+aa+"</h4></div>":"")+'<form class="note-modal-form"><div class="modal-body">'+Y+"</div>"+(ab?'<div class="modal-footer">'+ab+"</div>":"")+"</form></div></div></div>"};var T={picture:function(Y){return J("fa fa-picture-o",{event:"showImageDialog",title:Y.image.image,hide:true})},link:function(Y){return J("fa fa-link",{event:"showLinkDialog",title:Y.link.link,hide:true})},table:function(Y){var Z='<ul class="note-table dropdown-menu"><div class="note-dimension-picker"><div class="note-dimension-picker-mousecatcher" data-event="insertTable" data-value="1x1"></div><div class="note-dimension-picker-highlighted"></div><div class="note-dimension-picker-unhighlighted"></div></div><div class="note-dimension-display"> 1 x 1 </div></ul>';return J("fa fa-table",{title:Y.table.table,dropdown:Z})},style:function(aa,Z){var Y=Z.styleTags.reduce(function(ac,ab){var ad=aa.style[ab==="p"?"normal":ab];return ac+'<li><a data-event="formatBlock" href="#" data-value="'+ab+'">'+((ab==="p"||ab==="pre")?ad:"<"+ab+">"+ad+"</"+ab+">")+"</a></li>"},"");return J("fa fa-magic",{title:aa.style.style,dropdown:'<ul class="dropdown-menu">'+Y+"</ul>"})},fontname:function(ab,aa){var Y=aa.fontNames.reduce(function(ad,ac){if(!b.isFontInstalled(ac)&&aa.fontNamesIgnoreCheck.indexOf(ac)===-1){return ad}return ad+'<li><a data-event="fontName" href="#" data-value="'+ac+'" style="font-family:\''+ac+'\'"><i class="fa fa-check"></i> '+ac+"</a></li>"},"");var Z='<span class="note-current-fontname">'+aa.defaultFontName+"</span>";return F(Z,{title:ab.font.name,dropdown:'<ul class="dropdown-menu">'+Y+"</ul>"})},color:function(ab){var aa='<i class="fa fa-font" style="color:black;background-color:yellow;"></i>';var Y=F(aa,{className:"note-recent-color",title:ab.color.recent,event:"color",value:'{"backColor":"yellow"}'});var ac='<ul class="dropdown-menu"><li><div class="btn-group"><div class="note-palette-title">'+ab.color.background+'</div><div class="note-color-reset" data-event="backColor" data-value="inherit" title="'+ab.color.transparent+'">'+ab.color.setTransparent+'</div><div class="note-color-palette" data-target-event="backColor"></div></div><div class="btn-group"><div class="note-palette-title">'+ab.color.foreground+'</div><div class="note-color-reset" data-event="foreColor" data-value="inherit" title="'+ab.color.reset+'">'+ab.color.resetToDefault+'</div><div class="note-color-palette" data-target-event="foreColor"></div></div></li></ul>';var Z=F("",{title:ab.color.more,dropdown:ac});return Y+Z},bold:function(Y){return J("fa fa-bold",{event:"bold",title:Y.font.bold})},italic:function(Y){return J("fa fa-italic",{event:"italic",title:Y.font.italic})},underline:function(Y){return J("fa fa-underline",{event:"underline",title:Y.font.underline})},clear:function(Y){return J("fa fa-eraser",{event:"removeFormat",title:Y.font.clear})},ul:function(Y){return J("fa fa-list-ul",{event:"insertUnorderedList",title:Y.lists.unordered})},ol:function(Y){return J("fa fa-list-ol",{event:"insertOrderedList",title:Y.lists.ordered})},paragraph:function(ae){var aa=J("fa fa-align-left",{title:ae.paragraph.left,event:"justifyLeft"});var ad=J("fa fa-align-center",{title:ae.paragraph.center,event:"justifyCenter"});var ab=J("fa fa-align-right",{title:ae.paragraph.right,event:"justifyRight"});var ac=J("fa fa-align-justify",{title:ae.paragraph.justify,event:"justifyFull"});var Z=J("fa fa-outdent",{title:ae.paragraph.outdent,event:"outdent"});var Y=J("fa fa-indent",{title:ae.paragraph.indent,event:"indent"});var af='<div class="dropdown-menu"><div class="note-align btn-group">'+aa+ad+ab+ac+'</div><div class="note-list btn-group">'+Y+Z+"</div></div>";return J("fa fa-align-left",{title:ae.paragraph.paragraph,dropdown:af})},height:function(aa,Z){var Y=Z.lineHeights.reduce(function(ac,ab){return ac+'<li><a data-event="lineHeight" href="#" data-value="'+parseFloat(ab)+'"><i class="fa fa-check"></i> '+ab+"</a></li>"},"");return J("fa fa-text-height",{title:aa.font.height,dropdown:'<ul class="dropdown-menu">'+Y+"</ul>"})},help:function(Y){return J("fa fa-question",{event:"showHelpDialog",title:Y.options.help,hide:true})},fullscreen:function(Y){return J("fa fa-arrows-alt",{event:"fullscreen",title:Y.options.fullscreen})},codeview:function(Y){return J("fa fa-code",{event:"codeview",title:Y.options.codeview})},undo:function(Y){return J("fa fa-undo",{event:"undo",title:Y.history.undo})},redo:function(Y){return J("fa fa-repeat",{event:"redo",title:Y.history.redo})},hr:function(Y){return J("fa fa-minus",{event:"insertHorizontalRule",title:Y.hr.insert})}};var G=function(ac,Y){var ab=function(){var ad=J("fa fa-edit",{title:ac.link.edit,event:"showLinkDialog",hide:true});var af=J("fa fa-unlink",{title:ac.link.unlink,event:"unlink"});var ae='<a href="http://www.google.com" target="_blank">www.google.com</a>&nbsp;&nbsp;<div class="note-insert btn-group">'+ad+af+"</div>";return O("note-link-popover",ae)};var aa=function(){var af=F('<span class="note-fontsize-10">100%</span>',{title:ac.image.resizeFull,event:"resize",value:"1"});var ad=F('<span class="note-fontsize-10">50%</span>',{title:ac.image.resizeHalf,event:"resize",value:"0.5"});var ak=F('<span class="note-fontsize-10">25%</span>',{title:ac.image.resizeQuarter,event:"resize",value:"0.25"});var ae=J("fa fa-align-left",{title:ac.image.floatLeft,event:"floatMe",value:"left"});var am=J("fa fa-align-right",{title:ac.image.floatRight,event:"floatMe",value:"right"});var aj=J("fa fa-align-justify",{title:ac.image.floatNone,event:"floatMe",value:"none"});var ag=J("fa fa-square",{title:ac.image.shapeRounded,event:"imageShape",value:"img-rounded"});var an=J("fa fa-circle-o",{title:ac.image.shapeCircle,event:"imageShape",value:"img-circle"});var ai=J("fa fa-picture-o",{title:ac.image.shapeThumbnail,event:"imageShape",value:"img-thumbnail"});var ao=J("fa fa-times",{title:ac.image.shapeNone,event:"imageShape",value:""});var ah=J("fa fa-trash-o",{title:ac.image.remove,event:"removeMedia",value:"none"});var al='<div class="btn-group">'+af+ad+ak+'</div><div class="btn-group">'+ae+am+aj+'</div><div class="btn-group">'+ag+an+ai+ao+'</div><div class="btn-group">'+ah+"</div>";return O("note-image-popover",al)};var Z=function(){var ag="";for(var ae=0,ad=Y.airPopover.length;ae<ad;ae++){var ai=Y.airPopover[ae];ag+='<div class="note-'+ai[0]+' btn-group">';for(var af=0,ah=ai[1].length;af<ah;af++){ag+=T[ai[1][af]](ac,Y)}ag+="</div>"}return O("note-air-popover",ag)};return'<div class="note-popover">'+ab()+aa()+(Y.airMode?Z():"")+"</div>"};var W=function(){return'<div class="note-handle"><div class="note-control-selection"><div class="note-control-selection-bg"></div><div class="note-control-holder note-control-nw"></div><div class="note-control-holder note-control-ne"></div><div class="note-control-holder note-control-sw"></div><div class="note-control-sizing note-control-se"></div><div class="note-control-selection-info"></div></div></div>'};var M=function(ac,aa){var ab="note-shortcut-col col-xs-6 note-shortcut-";var Y=[];for(var Z in aa){if(aa.hasOwnProperty(Z)){Y.push('<div class="'+ab+'key">'+aa[Z].kbd+'</div><div class="'+ab+'name">'+aa[Z].text+"</div>")}}return'<div class="note-shortcut-row row"><div class="'+ab+'title col-xs-offset-6">'+ac+'</div></div><div class="note-shortcut-row row">'+Y.join('</div><div class="note-shortcut-row row">')+"</div>"};var D=function(Z){var Y=[{kbd:"⌘ + B",text:Z.font.bold},{kbd:"⌘ + I",text:Z.font.italic},{kbd:"⌘ + U",text:Z.font.underline},{kbd:"⌘ + \\",text:Z.font.clear}];return M(Z.shortcut.textFormatting,Y)};var V=function(Z){var Y=[{kbd:"⌘ + Z",text:Z.history.undo},{kbd:"⌘ + ⇧ + Z",text:Z.history.redo},{kbd:"⌘ + ]",text:Z.paragraph.indent},{kbd:"⌘ + [",text:Z.paragraph.outdent},{kbd:"⌘ + ENTER",text:Z.hr.insert}];return M(Z.shortcut.action,Y)};var Q=function(Z){var Y=[{kbd:"⌘ + ⇧ + L",text:Z.paragraph.left},{kbd:"⌘ + ⇧ + E",text:Z.paragraph.center},{kbd:"⌘ + ⇧ + R",text:Z.paragraph.right},{kbd:"⌘ + ⇧ + J",text:Z.paragraph.justify},{kbd:"⌘ + ⇧ + NUM7",text:Z.lists.ordered},{kbd:"⌘ + ⇧ + NUM8",text:Z.lists.unordered}];return M(Z.shortcut.paragraphFormatting,Y)};var S=function(Z){var Y=[{kbd:"⌘ + NUM0",text:Z.style.normal},{kbd:"⌘ + NUM1",text:Z.style.h1},{kbd:"⌘ + NUM2",text:Z.style.h2},{kbd:"⌘ + NUM3",text:Z.style.h3},{kbd:"⌘ + NUM4",text:Z.style.h4},{kbd:"⌘ + NUM5",text:Z.style.h5},{kbd:"⌘ + NUM6",text:Z.style.h6}];return M(Z.shortcut.documentStyle,Y)};var H=function(ac,Y){var aa=Y.extraKeys;var ab=[];for(var Z in aa){if(aa.hasOwnProperty(Z)){ab.push({kbd:Z,text:aa[Z]})}}return M(ac.shortcut.extraKeys,ab)};var U=function(ab,Y){var aa='class="note-shortcut note-shortcut-col col-sm-6 col-xs-12"';var Z=["<div "+aa+">"+V(ab,Y)+"</div><div "+aa+">"+D(ab,Y)+"</div>","<div "+aa+">"+S(ab,Y)+"</div><div "+aa+">"+Q(ab,Y)+"</div>"];if(Y.extraKeys){Z.push("<div "+aa+">"+H(ab,Y)+"</div>")}return'<div class="note-shortcut-row row">'+Z.join('</div><div class="note-shortcut-row row">')+"</div>"};var N=function(Y){return Y.replace(/⌘/g,"Ctrl").replace(/⇧/g,"Shift")};var P={image:function(ad,Z){var ab="";if(Z.maximumImageFileSize){var aa=Math.floor(Math.log(Z.maximumImageFileSize)/Math.log(1024));var ac=(Z.maximumImageFileSize/Math.pow(1024,aa)).toFixed(2)*1+"  KMGTP"[aa]+"B";ab="<small>"+ad.image.maximumFileSize+" : "+ac+"</small>"}var Y='<div class="form-group row-fluid note-group-select-from-files"><label>'+ad.image.selectFromFiles+'</label><input class="note-image-input" type="file" name="files" accept="image/*" multiple="multiple" />'+ab+'</div><div class="form-group row-fluid"><label>'+ad.image.url+'</label><input class="note-image-url form-control span12" type="text" /></div>';var ae='<button href="#" class="btn btn-primary note-image-btn disabled" disabled>'+ad.image.insert+"</button>";return X("note-image-dialog",ad.image.insert,Y,ae)},link:function(aa,Z){var Y='<div class="form-group row-fluid"><label>'+aa.link.textToDisplay+'</label><input class="note-link-text form-control span12" type="text" /></div><div class="form-group row-fluid"><label>'+aa.link.url+'</label><input class="note-link-url form-control span12" type="text" /></div>'+(!Z.disableLinkTarget?'<div class="checkbox"><label><input type="checkbox" checked> '+aa.link.openInNewWindow+"</label></div>":"");var ab='<button href="#" class="btn btn-primary note-link-btn disabled" disabled>'+aa.link.insert+"</button>";return X("note-link-dialog",aa.link.insert,Y,ab)},help:function(aa,Z){var Y='<a class="modal-close pull-right" aria-hidden="true" tabindex="-1">'+aa.shortcut.close+'</a><div class="title">'+aa.shortcut.shortcuts+"</div>"+(b.isMac?U(aa,Z):N(U(aa,Z)))+'<p class="text-center"><a href="//summernote.org/" target="_blank">Summernote 0.6.1</a> · <a href="//github.com/summernote/summernote" target="_blank">Project</a> · <a href="//github.com/summernote/summernote/issues" target="_blank">Issues</a></p>';return X("note-help-dialog","",Y,"")}};var E=function(aa,Y){var Z="";g.each(P,function(ab,ac){Z+=ac(aa,Y)});return'<div class="note-dialog">'+Z+"</div>"};var L=function(){return'<div class="note-resizebar"><div class="note-icon-bar"></div><div class="note-icon-bar"></div><div class="note-icon-bar"></div></div>'};var K=function(Y){if(b.isMac){Y=Y.replace("CMD","⌘").replace("SHIFT","⇧")}return Y.replace("BACKSLASH","\\").replace("SLASH","/").replace("LEFTBRACKET","[").replace("RIGHTBRACKET","]")};var R=function(ab,ac,Y){var aa=j.invertObject(ac);var Z=ab.find("button");Z.each(function(ae,ag){var af=g(ag);var ad=aa[af.data("event")];if(ad){af.attr("title",function(ai,ah){return ah+" ("+K(ad)+")"})}}).tooltip({container:"body",trigger:"hover",placement:Y||"top"}).on("click",function(){g(this).tooltip("hide")})};var I=function(aa,Y){var Z=Y.colors;aa.find(".note-color-palette").each(function(){var ah=g(this),af=ah.attr("data-target-event");var ad=[];for(var ak=0,ag=Z.length;ak<ag;ak++){var ab=Z[ak];var ai=[];for(var ac=0,aj=ab.length;ac<aj;ac++){var ae=ab[ac];ai.push(['<button type="button" class="note-color-btn" style="background-color:',ae,';" data-event="',af,'" data-value="',ae,'" title="',ae,'" data-toggle="button" tabindex="-1"></button>'].join(""))}ad.push('<div class="note-color-row">'+ai.join("")+"</div>")}ah.html(ad.join(""))})};this.createLayoutByAirMode=function(ab,ag){var af=ag.langInfo;var ae=ag.keyMap[b.isMac?"mac":"pc"];var Y=j.uniqueId();ab.addClass("note-air-editor note-editable");ab.attr({id:"note-editor-"+Y,contentEditable:true});var ad=document.body;var ac=g(G(af,ag));ac.addClass("note-air-layout");ac.attr("id","note-popover-"+Y);ac.appendTo(ad);R(ac,ae);I(ac,ag);var Z=g(W());Z.addClass("note-air-layout");Z.attr("id","note-handle-"+Y);Z.appendTo(ad);var aa=g(E(af,ag));aa.addClass("note-air-layout");aa.attr("id","note-dialog-"+Y);aa.find("button.close, a.modal-close").click(function(){g(this).closest(".modal").modal("hide")});aa.appendTo(ad)};this.createLayoutByFrame=function(aj,Y){var al=Y.langInfo;var ac=g('<div class="note-editor"></div>');if(Y.width){ac.width(Y.width)}if(Y.height>0){g('<div class="note-statusbar">'+(Y.disableResizeEditor?"":L())+"</div>").prependTo(ac)}var an=!aj.is(":disabled");var ap=g('<div class="note-editable" contentEditable="'+an+'"></div>').prependTo(ac);if(Y.height){ap.height(Y.height)}if(Y.direction){ap.attr("dir",Y.direction)}var aa=aj.attr("placeholder")||Y.placeholder;if(aa){ap.attr("data-placeholder",aa)}ap.html(w.html(aj));g('<textarea class="note-codable"></textarea>').prependTo(ac);var ah="";for(var af=0,am=Y.toolbar.length;af<am;af++){var ad=Y.toolbar[af][0];var ae=Y.toolbar[af][1];ah+='<div class="note-'+ad+' btn-group">';for(var ak=0,ag=ae.length;ak<ag;ak++){var ab=T[ae[ak]];if(!g.isFunction(ab)){continue}ah+=ab(al,Y)}ah+="</div>"}ah='<div class="note-toolbar btn-toolbar">'+ah+"</div>";var aq=g(ah).prependTo(ac);var ai=Y.keyMap[b.isMac?"mac":"pc"];I(aq,Y);R(aq,ai,"bottom");var Z=g(G(al,Y)).prependTo(ac);I(Z,Y);R(Z,ai);g(W()).prependTo(ac);var ao=g(E(al,Y)).prependTo(ac);ao.find("button.close, a.modal-close").click(function(){g(this).closest(".modal").modal("hide")});g('<div class="note-dropzone"><div class="note-dropzone-message"></div></div>').prependTo(ac);ac.insertAfter(aj);aj.hide()};this.noteEditorFromHolder=function(Y){if(Y.hasClass("note-air-editor")){return Y}else{if(Y.next().hasClass("note-editor")){return Y.next()}else{return g()}}};this.createLayout=function(Z,Y){if(this.noteEditorFromHolder(Z).length){return}if(Y.airMode){this.createLayoutByAirMode(Z,Y)}else{this.createLayoutByFrame(Z,Y)}};this.layoutInfoFromHolder=function(Z){var ab=this.noteEditorFromHolder(Z);if(!ab.length){return}var aa=w.buildLayoutInfo(ab);for(var Y in aa){if(aa.hasOwnProperty(Y)){aa[Y]=aa[Y].call()}}return aa};this.removeLayout=function(Z,aa,Y){if(Y.airMode){Z.removeClass("note-air-editor note-editable").removeAttr("id contentEditable");aa.popover.remove();aa.handle.remove();aa.dialog.remove()}else{Z.html(aa.editable.html());aa.editor.remove();Z.show()}};this.getTemplate=function(){return{button:F,iconButton:J,dialog:X}};this.addButtonInfo=function(Y,Z){T[Y]=Z};this.addDialogInfo=function(Z,Y){P[Z]=Y}};g.summernote=g.summernote||{};g.extend(g.summernote,A);var q=new s();var v=new l();g.extend(g.summernote,{renderer:q,eventHandler:v,core:{agent:b,dom:w,range:n},pluginEvents:{}});g.summernote.addPlugin=function(D){if(D.buttons){g.each(D.buttons,function(E,F){q.addButtonInfo(E,F)})}if(D.dialogs){g.each(D.dialogs,function(E,F){q.addDialogInfo(E,F)})}if(D.events){g.each(D.events,function(E,F){g.summernote.pluginEvents[E]=F})}if(D.langs){g.each(D.langs,function(E,F){if(g.summernote.lang[E]){g.extend(g.summernote.lang[E],F)}})}if(D.options){g.extend(g.summernote.options,D.options)}};g.fn.extend({summernote:function(D){D=g.extend({},g.summernote.options,D);D.langInfo=g.extend(true,{},g.summernote.lang["en-US"],g.summernote.lang[D.lang]);this.each(function(F,G){var H=g(G);q.createLayout(H,D);var I=q.layoutInfoFromHolder(H);v.attach(I,D);if(w.isTextarea(H[0])){H.closest("form").submit(function(){var J=H.code();H.val(J);if(D.onsubmit){D.onsubmit(J)}})}});if(this.first().length&&D.focus){var E=q.layoutInfoFromHolder(this.first());E.editable.focus()}if(this.length&&D.oninit){D.oninit()}return this},code:function(E){if(E===undefined){var F=this.first();if(!F.length){return}var G=q.layoutInfoFromHolder(F);if(!!(G&&G.editable)){var D=G.editor.hasClass("codeview");if(D&&b.hasCodeMirror){G.codable.data("cmEditor").save()}return D?G.codable.val():G.editable.html()}return w.isTextarea(F[0])?F.val():F.html()}this.each(function(I,H){var J=q.layoutInfoFromHolder(g(H));if(J&&J.editable){J.editable.html(E)}});return this},destroy:function(){this.each(function(D,F){var G=g(F);var H=q.layoutInfoFromHolder(G);if(!H||!H.editable){return}var E=H.editor.data("options");v.detach(H,E);q.removeLayout(G,H,E)});return this}})}));